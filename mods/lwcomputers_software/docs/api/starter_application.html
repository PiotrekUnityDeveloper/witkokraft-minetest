<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Starter Application</title>
    <meta name="author" content="loosewheel">
    <style>a:link {text-decoration:none;}</style>
  </head>
  <body style="font-family: sans-serif;">
    <h1 style="background-color: rgb(128, 128, 255); padding: 8pt;"><a
        name="top"></a>Starter Application - WIN</h1>
    The following is a basic starter application. It adds the title bar
    and overrides the more commonly used handlers. Note that the title
    text is simply set with a static value. Because multiple instances
    of an application can be run each instance should identify itself
    uniquely, general by its purpose.<br>
    <br>
    <pre><font color="#cc0000">-- collect any program arguments</font><br><font color="#330099">local</font> app_args = { ... }<br><br><font color="#cc0000">-- create the application's main frame</font><br><font color="#330099">local</font> appFrame = win.create_app_frame ()<br><br><br><font color="#330099">local</font> APP_TITLE      = <font color="#ffcc00">"Starter"</font><br><br><br><font color="#cc0000">-- handle control, wanted and custom events</font><br><font color="#330099">function</font> appFrame:on_event (event, p1, p2, p3, p4, p5, ...)<br>   <font color="#cc0000">-- handle events and return true</font><br><br>   <font color="#330099">return false</font><br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- if needed, low priority, called about every 1/3 second</font><br><font color="#cc0000">-- when nothing happening - but keep it brief</font><br><font color="#330099">function</font> appFrame:on_idle (idle_count)<br>   <font color="#330099">return false</font><br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- if needed</font><br><font color="#330099">function</font> appFrame:on_alarm (alarm_id)<br>   <font color="#330099">return false</font><br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- if needed</font><br><font color="#330099">function</font> appFrame:on_timer (timer_id)<br>   <font color="#330099">return false</font><br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- to reposition control windows, app frames should only</font><br><font color="#cc0000">-- move if monitor device changes size/resolution or</font><br><font color="#cc0000">-- fullscreen mode changes</font><br><font color="#330099">function</font> appFrame:on_move ()<br>   <font color="#330099">return false</font><br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- for clean up, if needed</font><br><font color="#330099">function</font> appFrame:on_destroy_wnd ()<br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- to implement accelerator keys. best to use with combo keys</font><br><font color="#cc0000">-- to try and avoid char event following to child</font><br><font color="#330099">function</font> appFrame:on_child_key (wnd, key, ctrl, alt, shift)<br>   <font color="#cc0000">-- base implements tab key navigation</font><br>   <font color="#330099">if</font> win.applicationFrame.on_child_key (self, wnd, key, ctrl, alt, shift) <font color="#330099">then</font><br>      <font color="#330099">return true</font><br>   <font color="#330099">end</font><br><br>   <font color="#cc0000">-- return true if handled so child does not receive key event</font><br><br>   <font color="#330099">return false</font><br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- called when app becomes and stops being the active app</font><br><font color="#330099">function</font> appFrame:on_frame_activate (active)<br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- called when app is quitting</font><br><font color="#330099">function</font> appFrame:on_quit ()<br>   <font color="#cc0000">-- return true to stop app from quitting</font><br><br>   <font color="#330099">return false</font><br><font color="#330099">end</font><br><br><br><font color="#330099">function</font> appFrame:on_create ()<br>   <font color="#cc0000">-- add title bar and close btn, close btn will have focus</font><br>   <font color="#cc0000">-- frame wnd text displays in running app list</font><br>   self:dress (APP_TITLE)<br><br><br>   <font color="#cc0000">-- create controls, usually setting focus to first</font><br><br><br>   <font color="#cc0000">-- app is constructed, bring it to top</font><br>   self:set_active_top_frame ()<br><br>   <font color="#330099">return true</font><br><font color="#330099">end</font><br><br><br><font color="#cc0000">-- run the application's loop</font><br>appFrame:run_app ()</pre>
    <br>
    <br>
    See <a moz-do-not-send="true" href="application_writing.html">Application
      Writing</a>, <a moz-do-not-send="true" href="index.html">WIN</a>.<br>
    <br>
    <br>
  </body>
</html>
